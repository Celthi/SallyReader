<!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/head-first-design/0596007124/ch02.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy="public"


  data-user-id="2198516"
  data-user-uuid="48b847cc-4100-401a-9732-d0a93f06ed1e"
  data-username="Evan_l00"
  data-account-type="B2B"
  
  data-activated-trial-date=""


  data-archive="0596007124"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch02.html"
  data-epub-title="Head First Design Patterns" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/head-first-design/0596007124/ch02.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy="public"


  data-user-id="2198516"
  data-user-uuid="48b847cc-4100-401a-9732-d0a93f06ed1e"
  data-username="Evan_l00"
  data-account-type="B2B"
  
  data-activated-trial-date=""


  data-archive="0596007124"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch02.html"
  data-epub-title="Head First Design Patterns" data-debug=0 data-testing=0><!--<![endif]--><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="author" content="Safari Books Online" /><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"/><meta name="HandheldFriendly" content="True"/><meta name="MobileOptimized" content="320"/><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://0596007124"/><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"/><meta property="twitter:account_id" content="4503599627559754" /><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var o=n[t]={exports:{}};e[t][0].call(o.exports,function(n){var o=e[t][1][n];return r(o||n)},o,o.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<t.length;o++)r(t[o]);return r}({1:[function(e,n,t){function r(){}function o(e,n,t){return function(){return i(e,[c.now()].concat(u(arguments)),n?null:this,t),n?void 0:this}}var i=e("handle"),a=e(3),u=e(4),f=e("ee").get("tracer"),c=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(e,n){s[n]=o(d+n,!0,"api")}),s.addPageAction=o(d+"addPageAction",!0),s.setCurrentRouteName=o(d+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,o="function"==typeof n;return i(l+"tracer",[c.now(),e,t],r),function(){if(f.emit((o?"":"no-")+"fn-start",[c.now(),r,o],t),o)try{return n.apply(this,arguments)}catch(e){throw f.emit("fn-err",[arguments,this,e],t),e}finally{f.emit("fn-end",[c.now()],t)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=o(l+n)}),newrelic.noticeError=function(e,n){"string"==typeof e&&(e=new Error(e)),i("err",[e,c.now(),!1,n])}},{}],2:[function(e,n,t){function r(e,n){if(!o)return!1;if(e!==o)return!1;if(!n)return!0;if(!i)return!1;for(var t=i.split("."),r=n.split("."),a=0;a<r.length;a++)if(r[a]!==t[a])return!1;return!0}var o=null,i=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var u=navigator.userAgent,f=u.match(a);f&&u.indexOf("Chrome")===-1&&u.indexOf("Chromium")===-1&&(o="Safari",i=f[1])}n.exports={agent:o,version:i,match:r}},{}],3:[function(e,n,t){function r(e,n){var t=[],r="",i=0;for(r in e)o.call(e,r)&&(t[i]=n(r,e[r]),i+=1);return t}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],4:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,i=Array(o<0?0:o);++r<o;)i[r]=e[n+r];return i}n.exports=r},{}],5:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function o(e){function n(e){return e&&e instanceof r?e:e?f(e,u,i):i()}function t(t,r,o,i){if(!d.aborted||i){e&&e(t,r,o);for(var a=n(o),u=v(t),f=u.length,c=0;c<f;c++)u[c].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function l(e,n){h[e]=v(e).concat(n)}function m(e,n){var t=h[e];if(t)for(var r=0;r<t.length;r++)t[r]===n&&t.splice(r,1)}function v(e){return h[e]||[]}function g(e){return p[e]=p[e]||o(t)}function w(e,n){c(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var h={},y={},b={on:l,addEventListener:l,removeEventListener:m,emit:t,get:g,listeners:v,context:n,buffer:w,abort:a,aborted:!1};return b}function i(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var u="nr@context",f=e("gos"),c=e(3),s={},p={},d=n.exports=o();d.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(o.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){o.buffer([e],r),o.emit(e,n,t)}var o=e("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!E++){var e=x.info=NREUM.info,n=l.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();c(y,function(n,t){e[n]||(e[n]=t)}),f("mark",["onload",a()+x.offset],null,"api");var t=l.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function o(){"complete"===l.readyState&&i()}function i(){f("mark",["domContent",a()+x.offset],null,"api")}function a(){return O.exists&&performance.now?Math.round(performance.now()):(u=Math.max((new Date).getTime(),u))-x.offset}var u=(new Date).getTime(),f=e("handle"),c=e(3),s=e("ee"),p=e(2),d=window,l=d.document,m="addEventListener",v="attachEvent",g=d.XMLHttpRequest,w=g&&g.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:g,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var h=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1130.min.js"},b=g&&w&&w[m]&&!/CriOS/.test(navigator.userAgent),x=n.exports={offset:u,now:a,origin:h,features:{},xhrWrappable:b,userAgent:p};e(1),l[m]?(l[m]("DOMContentLoaded",i,!1),d[m]("load",r,!1)):(l[v]("onreadystatechange",o),d[v]("onload",r)),f("mark",["firstbyte",u],null,"api");var E=0,O=e(5)},{}]},{},["loader"]);</script><link rel="apple-touch-icon" href="/static/images/apple-touch-icon.0c29511d2d72.png"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic' rel='stylesheet' type='text/css'><title>2. The Observer Pattern: Keeping your Objects in the know - Head First Design Patterns</title><link rel="stylesheet" href="/static/CACHE/css/output.68851547a55f.css" type="text/css" /><link rel="stylesheet" type="text/css" href="/static/css/annotator.e3b0c44298fc.css"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content font,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}@page{margin:5px !important}#sbo-rt-content p{margin:8px 0 0;line-height:125%;text-align:left}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link{text-decoration:none;color:#8e0012}#sbo-rt-content sup{font-size:x-small;vertical-align:super}#sbo-rt-content sub{font-size:smaller;vertical-align:sub}#sbo-rt-content span.lineannotation{font-style:italic;color:#A62A2A;font-family:serif,"DejaVuSerif"}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#FFF}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content h1,#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important}#sbo-rt-content h2{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content h3{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content h4{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content h5{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section.chapter div.titlepage,#sbo-rt-content section.appendix div.titlepage,#sbo-rt-content section.preface div.titlepage{page-break-inside:avoid;page-break-after:avoid}#sbo-rt-content section.chapter>div.titlepage,#sbo-rt-content section.preface>div.titlepage,#sbo-rt-content section.appendix>div.titlepage{margin-bottom:50px}#sbo-rt-content section.chapter>div.titlepage h2.title,#sbo-rt-content section.preface>div.titlepage h2.title,#sbo-rt-content section.appendix>div.titlepage h2.title{font-size:2em;line-height:1;margin-bottom:15px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content div.toc-title{margin-bottom:30px !important}#sbo-rt-content div.part h1{font-size:2em;text-align:center;margin-top:0 !important;padding:50px 0 20px 0;border-bottom:1px solid #000}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;padding:15px 5px 15px 5px !important;margin:30px 0 30px 0 !important;max-height:100%;page-break-inside:avoid}#sbo-rt-content div.figure-title,#sbo-rt-content div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:30px 0 20px 0 !important;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;background-color:#F7F7F7;font-size:90%;padding:15px !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title{font-weight:bold;font-size:1em;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar ol{margin-left:15px}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div.caution,#sbo-rt-content div.sidebar div.important{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content div.sidebar div.figure{border:none}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div.example{margin:10px 0 15px 0 !important}#sbo-rt-content div.example-title{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div.example-contents pre.programlisting,#sbo-rt-content div.example-contents pre.screen{margin:0}#sbo-rt-content span.gray{color:#4C4C4C}#sbo-rt-content div.book div.titlepage h1.title{font-size:3em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content div.book div.titlepage h2.subtitle{text-align:center;color:#000;margin:0 !important;font-style:italic;font-family:serif;font-size:1.5em}#sbo-rt-content div.book div.titlepage div.author h3{font-size:2em;font-family:sans-serif,"DejaVuSans";font-weight:bold;color:#8e0012;margin:50px 0 !important;text-align:center}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif,"DejaVuSerif";font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif,"DejaVuSerif";margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10pt}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-family:serif,"DejaVuSerif";font-style:italic}#sbo-rt-content blockquote div.attribution{margin:5px 0 0 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p{font-style:normal}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div.footnote{font-size:90%}#sbo-rt-content div.refnamediv h2,#sbo-rt-content div.refnamediv h3,#sbo-rt-content div.refsynopsisdiv h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refentry div.refsect1 h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refsect2 h3{font-size:1em;color:#000;margin-top:10px !important;margin-bottom:0 !important}#sbo-rt-content div.refnamediv p{margin-left:15px !important}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dt span.term{font-weight:bold;font-style:italic}#sbo-rt-content dt span.term code.literal{font-style:normal;font-weight:normal}#sbo-rt-content dt span.term em code.literal{font-style:italic}#sbo-rt-content dd{margin-left:1.5em !important}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ol{list-style-type:decimal;margin-top:8px !important;margin-bottom:8px !important;margin-left:20px !important;padding-left:25px !important}#sbo-rt-content ol[type="A"]{list-style-type:upper-alpha}#sbo-rt-content ol[type="I"]{list-style-type:upper-roman}#sbo-rt-content ol[type="a"]{list-style-type:lower-alpha}#sbo-rt-content ol[type="i"]{list-style-type:lower-roman}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ul{list-style-type:square;margin-top:8px !important;margin-bottom:8px !important;margin-left:5px !important;padding-left:20px !important}#sbo-rt-content ul ul{list-style-type:none;padding-left:0 !important;margin-left:0 !important}#sbo-rt-content ol li,#sbo-rt-content ul li,#sbo-rt-content dd{margin-bottom:1em}#sbo-rt-content ul ul li p:before{content:"— "}#sbo-rt-content ul ul ul li p:before{content:""}#sbo-rt-content ul ul ul{list-style-type:square;margin-left:20px !important;padding-left:30px !important}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist{margin-left:20px !important;margin-bottom:10px}#sbo-rt-content table.simplelist td{border:none;font-size:90%}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content div.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content div.calloutlist img{padding:0}#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.calloutlist>dl>dd>div.orderedlist{margin-top:25pt}#sbo-rt-content div.calloutlist>dl>dd>div.orderedlist>ol.orderedlist>li{margin-bottom:25pt}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div.note,#sbo-rt-content div.warning,#sbo-rt-content div.caution,#sbo-rt-content div.important{margin:30px !important;-webkit-border-radius:5px;border-radius:5px;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip,#sbo-rt-content div.note,#sbo-rt-content div.important{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div.caution{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div.note h3,#sbo-rt-content div.warning h3,#sbo-rt-content div.caution h3,#sbo-rt-content div.important h3{font:bold 90%;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div.note h3,#sbo-rt-content div.important h3{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div.caution h3{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;-webkit-border-radius:0;border-radius:0;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px auto 30px auto !important;max-width:95%;border-collapse:collapse;border-spacing:0}#sbo-rt-content div.table,#sbo-rt-content div.informaltable{page-break-inside:avoid}#sbo-rt-content tr{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif,"DejaVuSans";color:#000;font-weight:bold}#sbo-rt-content td{padding:.3em;text-align:left;vertical-align:baseline;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title{font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";margin:20px 0 0 0 !important;text-align:center;padding:0}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{font-weight:bold}#sbo-rt-content div.index dt{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif,"DejaVuSerif";text-align:left}
    </style><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/0596007124/chapter/ch02.html",
          "book_id": "0596007124",
          "chapter_uri": "ch02.html",
          "position": 0,
          "user_uuid": "48b847cc-4100-401a-9732-d0a93f06ed1e",
          "next_chapter_uri": "/library/view/head-first-design/0596007124/ch03.html"
        
      },
      title: "Head First Design Patterns",
      author_list: "Kathy Sierra, Bert Bates, Elisabeth Robson, Eric Freeman",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: false
    };
    // ]]></script><script src="/static/js/src/modernizr.8e35451ddb64.js"></script><script>
    
      

      
        
          window.PUBLIC_ANNOTATIONS = true;
        
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

      window.PRIVACY_CONTROL_SWITCH = true;

      window.PUBLISHER_PAGES = true;

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://learning.oreilly.com/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": true
        }
      };
  </script><link rel="canonical" href="https://learning.oreilly.com/library/view/head-first-design/0596007124/ch02.html"/><meta name="description" content="Chapter 2. The Observer Pattern: Keeping your Objects in the know Don’t miss out when something interesting happens! We’ve got a pattern that keeps your objects in the know when something they ... "><meta property="og:title" content="2. The Observer Pattern: Keeping your Objects in the know" /><meta itemprop="isPartOf" content="/library/view/head-first-design/0596007124/" /><meta itemprop="name" content="2. The Observer Pattern: Keeping your Objects in the know" /><meta property="og:url" itemprop="url" content="https://learning.oreilly.com/library/view/head-first-design/0596007124/ch02.html" /><meta property="og:site_name" content="Safari" /><meta property="og:image" itemprop="thumbnailUrl" content="https://learning.oreilly.com/library/cover/0596007124/" /><meta property="og:description" itemprop="description" content="Chapter 2. The Observer Pattern: Keeping your Objects in the know Don’t miss out when something interesting happens! We’ve got a pattern that keeps your objects in the know when something they ... "><meta itemprop="inLanguage" content="en" /><meta itemprop="publisher" content="O&#39;Reilly Media, Inc." /><meta property="og:type" content="book" /><meta property="og:book:isbn" itemprop="isbn" content="9780596007126" /><meta property="og:book:author" itemprop="author" content="Kathy Sierra" /><meta property="og:book:author" itemprop="author" content="Bert Bates" /><meta property="og:book:author" itemprop="author" content="Elisabeth Robson" /><meta property="og:book:author" itemprop="author" content="Eric Freeman" /><meta property="og:book:tag" itemprop="about" content="Core Programming" /><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; url=/library/no-js/" /></noscript><script type="text/javascript">
    (function(i,s,o,g,r,a,m) {
      i['GoogleAnalyticsObject']=r;
      i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();
      a=s.createElement(o),m=s.getElementsByTagName(o)[0];
      a.async=1;
      a.src=g;
      m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    var matches = document.cookie.match(/BrowserCookie\s*=\s*([a-f0-9\-]{36})/),
      user_uuid = null;

    if (matches && matches.length === 2) {
      user_uuid = matches[1];
    }

  
    ga('create', 'UA-39299553-7', {'userId': '48b847cc-4100-401a-9732-d0a93f06ed1e' });
  

  
    
      ga('set', 'dimension1', 'B2B');
    
  

  ga('set', 'dimension6', user_uuid);

  
    ga('set', 'dimension2', '48b847cc-4100-401a-9732-d0a93f06ed1e');
    
      ga('set', 'dimension7', '0014100001N37poAAB');
    
  

  

  

  //enable enhanced link tracking
  ga('require', 'linkid', 'linkid.js');

  // reading interface will track pageviews itself
  if (document.location.pathname.indexOf("/library/view") !== 0) {
    ga('send', 'pageview');
  }
  </script><script>
    var dataLayer = window.dataLayer || [];

    
      window.medalliaVsgUserIdentifier = '48b847cc-4100-401a-9732-d0a93f06ed1e';
      dataLayer.push({userIdentifier: '48b847cc-4100-401a-9732-d0a93f06ed1e'});
      dataLayer.push({loggedIn: 'yes'});

      
        window.medalliaVsgAccountIdentifier = '555c1d98-46da-46de-8ca0-0032dbcc46d2';
        
        dataLayer.push({orgID: '555c1d98-46da-46de-8ca0-0032dbcc46d2'});
        

        window.medalliaVsgIsIndividual = false;
        
          
          dataLayer.push({learningAccountType: 'enterprise'});
          
        

        
          dataLayer.push({learningPaidAccount: 'yes'});
        
      
    

    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
    (function () {
      var VERSION = 'V1.1';
      var AUTHOR = 'Awwad';
      if (!window.GtmHelper)
        window.GtmHelper = function () {
          var instance = this;
          var loc = document.location;
          this.version = VERSION;
          this.author = AUTHOR;
          this.readCookie = function (name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
              var c = ca[i];
              while (c.charAt(0) == ' ') c = c.substring(1, c.length);
              if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
          };
          this.createCookie = function (name, value, days, cookieDomain) {
            var domain = "";
            var expires = "";

            if (days) {
              var date = new Date();
              date.setTime(date.getTime() + Math.ceil(days * 24 * 60 * 60 * 1000));
              var expires = " expires=" + date.toGMTString() + ";";
            }

            if (typeof (cookieDomain) != 'undefined')
              domain = " domain=" + cookieDomain + "; ";

            document.cookie = name + "=" + value + ";" + expires + domain + "path=/";
          };

          this.isDuplicated = function (currentTransactionId) {
            // the previous transaction id:
            var previousTransIdValue = this.readCookie("previousTransId");

            if (currentTransactionId === previousTransIdValue) {
              return true; // Duplication
            } else {
              return false;
            }
          };
        }
    })()
  </script><script defer src="/static/js/build/vendor.75d9ef59282e.js"></script><script defer src="/static/js/build/reader.a89acaddae62.js"></script></head>


<body class="reading sidenav nav-collapsed  scalefonts">

    
  <noscript> 
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>



    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        

  




<a href="#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.738 14H9.254v-3.676a.617.617 0 0 0-.621-.613H7.39a.617.617 0 0 0-.62.613V14H4.284a.617.617 0 0 1-.622-.613V10.22c0-.327.132-.64.367-.87l3.547-3.493a.627.627 0 0 1 .875 0l3.54 3.499c.234.229.366.54.367.864v3.167a.617.617 0 0 1-.62.613zM7.57 2.181a.625.625 0 0 1 .882 0l5.77 5.692-.93.92-5.28-5.209-5.28 5.208-.932-.919 5.77-5.692z" /></svg><span>Safari Home</span></a></li><li><a href="/resource-centers/" class="t-resource-centers-nav l0 nav-icn"><?xml version="1.0" encoding="UTF-8"?><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Topic-Page-Design" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Heron-Button" transform="translate(-20.000000, -78.000000)" fill="#4A3A30"><g id="Group-9" transform="translate(20.000000, 78.000000)"><rect id="Rectangle" x="9.6" y="0" width="6.4" height="6.4" rx="0.503118"></rect><rect id="Rectangle" x="9.6" y="9.6" width="6.4" height="6.4" rx="0.503118"></rect><rect id="Rectangle" x="0" y="9.6" width="6.4" height="6.4" rx="0.503118"></rect></g></g></g></svg><span>Resource Centers</span></a></li><li><a href="/playlists/" class="t-queue-nav l0 nav-icn None"><?xml version="1.0" encoding="UTF-8"?><svg width="21px" height="17px" viewBox="0 0 21 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><!-- Generator: Sketch 46.2 (44496) - http://www.bohemiancoding.com/sketch --><title>icon_Playlist_sml</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="icon_Playlist_sml" fill-rule="nonzero" fill="#000000"><g id="playlist-icon"><g id="Group-6"><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle></g><g id="Group-5" transform="translate(0.000000, 7.000000)"><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect></g><g id="Group-5-Copy" transform="translate(0.000000, 14.000000)"><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect></g></g></g></g></svg><span>
               Playlists
            </span></a></li><li class="search"><a href="#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"/></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"/></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z"/></g></svg><span>History</span></a></li><li><a href="/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" width="20" height="20" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z"/></g></svg><span>Topics</span></a></li><li><a href="/learning-paths/" class="l1 nav-icn t-learningpaths-nav js-toggle-menu-item"><?xml version="1.0" encoding="UTF-8"?><svg width="32px" height="32px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><!-- Generator: Sketch 52.5 (67469) - http://www.bohemiancoding.com/sketch --><title>Mask</title><desc>Created with Sketch.</desc><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M0,16.0214227 C0,15.0387209 0.796453294,14.2411658 1.77779753,14.2411658 C2.75914177,14.2411658 3.55559506,15.0387209 3.55559506,16.0214227 C3.55559506,17.0041246 2.75914177,17.8016797 1.77779753,17.8016797 C0.796453294,17.8016797 0,17.0041246 0,16.0214227 Z M9.77788642,5.22914885 C8.9280992,5.72049977 7.84008711,5.42853763 7.34941499,4.57757479 C6.85874287,3.72661195 7.15030167,2.63709467 8.00008889,2.14574375 C8.84987611,1.65439282 9.9378882,1.94635496 10.4285603,2.7973178 C10.9192324,3.64828064 10.6276736,4.73779792 9.77788642,5.22914885 Z M4.57213969,7.35869225 C5.42192691,7.85004318 5.71348571,8.93956046 5.22281359,9.79052329 C4.73214147,10.6414861 3.64412938,10.9334483 2.79434216,10.4420974 C1.94455494,9.95074642 1.65299614,8.86122915 2.14366826,8.01026631 C2.63434038,7.15930347 3.72235247,6.86734132 4.57213969,7.35869225 Z M2.79434216,21.6007481 C3.64412938,21.1093972 4.73214147,21.4013594 5.22281359,22.2523222 C5.71348571,23.103285 5.42192691,24.1928023 4.57213969,24.6841532 C3.72235247,25.1755042 2.63434038,24.883542 2.14366826,24.0325792 C1.65299614,23.1816163 1.94455494,22.0920991 2.79434216,21.6007481 Z M7.34941499,27.4652707 C7.84008711,26.6143079 8.9280992,26.3223457 9.77788642,26.8136966 C10.6276736,27.3050476 10.9192324,28.3945649 10.4285603,29.2455277 C9.9378882,30.0964905 8.84987611,30.3884527 8.00008889,29.8971017 C7.15030167,29.4057508 6.85874287,28.3162335 7.34941499,27.4652707 Z M18.7118524,11.3165596 C21.3074367,12.8173162 22.1963355,16.1392758 20.6976522,18.738451 C19.1989689,21.3358459 15.8815987,22.2259744 13.2860143,20.726998 C10.6922077,19.2262414 9.80330893,15.9042818 11.3002144,13.3051066 C12.7988978,10.7059314 16.116268,9.81580294 18.7118524,11.3165596 Z M26.7821642,27.8093944 L30.1315348,31.1633985 C30.3982044,31.4304371 30.2097579,31.8844026 29.8346426,31.8844026 L21.5945511,31.8844026 C21.1287681,31.8844026 20.751875,31.5069881 20.751875,31.0405608 L20.751875,22.7890697 C20.751875,22.4134355 21.2052134,22.2247282 21.4701052,22.4899865 L24.2843587,25.3081333 C26.8337204,23.0240636 28.4444049,19.7092251 28.4444049,16.0223129 C28.4444049,9.15052091 22.8621207,3.56051397 15.9998222,3.56051397 L15.9998222,0 C24.8230314,0 32,7.18689745 32,16.0223129 C32,20.6919269 29.9750886,24.8790914 26.7821642,27.8093944 Z" id="Mask" fill="#8B889A"></path></g></svg><span>Learning Paths</span></a></li><li class="nav-offers flyout-parent"><a href="#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>offers icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M35.9 20.6L27 15.5C26.1 15 24.7 15 23.7 15.5L14.9 20.6C13.9 21.1 13.2 22.4 13.2 23.4L13.2 41.4C13.2 42.4 13.9 43.7 14.9 44.2L23.3 49C24.2 49.5 25.6 49.5 26.6 49L35.9 43.6C36.8 43.1 37.6 41.8 37.6 40.8L37.6 23.4C37.6 22.4 36.8 21.1 35.9 20.6L35.9 20.6ZM40 8.2C39.1 7.6 37.6 7.6 36.7 8.2L30.2 11.9C29.3 12.4 29.3 13.2 30.2 13.8L39.1 18.8C40 19.4 40.7 20.6 40.7 21.7L40.7 39C40.7 40.1 41.4 40.5 42.4 40L48.2 36.6C49.1 36.1 49.8 34.9 49.8 33.8L49.8 15.6C49.8 14.6 49.1 13.3 48.2 12.8L40 8.2 40 8.2ZM27 10.1L33.6 6.4C34.5 5.9 34.5 5 33.6 4.5L26.6 0.5C25.6 0 24.2 0 23.3 0.5L16.7 4.2C15.8 4.7 15.8 5.6 16.7 6.1L23.7 10.1C24.7 10.6 26.1 10.6 27 10.1ZM10.1 21.7C10.1 20.6 10.8 19.4 11.7 18.8L20.6 13.8C21.5 13.2 21.5 12.4 20.6 11.9L13.6 7.9C12.7 7.4 11.2 7.4 10.3 7.9L1.6 12.8C0.7 13.3 0 14.6 0 15.6L0 33.8C0 34.9 0.7 36.1 1.6 36.6L8.4 40.5C9.3 41 10.1 40.6 10.1 39.6L10.1 21.7 10.1 21.7Z"/></g></svg><span>Offers & Deals</span></a><ul class="flyout"><li><a href="/oreilly-conferences/" class="l2 nav-icn"><span>Conferences</span></a></li><li><a href="https://get.oreilly.com/email-signup.html" target="_blank" class="l2 nav-icn"><span>Newsletters</span></a></li></ul></li><li class="nav-highlights"><a href="/u/48b847cc-4100-401a-9732-d0a93f06ed1e/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" width="20" height="20" fill="#4A3C31"><path d="M13.325 18.071H8.036c0-6.736 4.324-10.925 14.464-12.477V0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35c5.142 0 9.175-3.515 9.175-8.816 0-4.628-2.367-7.293-6.253-8.113zm27.5 0h-5.26c0-6.736 4.295-10.925 14.435-12.477V0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35c5.113 0 9.146-3.515 9.146-8.816 0-4.628-2.338-7.293-6.253-8.113z" fill-rule="evenodd"/></svg><span>Highlights</span></a></li><li><a href="/u/preferences/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"/></g></svg><span>Settings</span></a></li><li><a href="https://www.oreilly.com/online-learning/support/" class="l1 no-icon">Support</a></li><li><a href="/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="/u/preferences/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"/></g></svg><span>Settings</span></a></li><li><a href="https://www.oreilly.com/online-learning/support/" class="l2">Support</a></li><li><a href="/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>



      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Head First Design Patterns
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/0596007124/chapter/ch02.html"><div class="js-collections-dropdown collections-dropdown menu-bit-cards"></div></div></li><li class="js-font-control-panel font-control-activator"><a href="#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a
        class="twitter share-button t-twitter"
        target="_blank"
        aria-label="Share this section on Twitter"
        title="Share this section on Twitter"
      
        href="https://twitter.com/share?url=https://learning.oreilly.com/library/view/head-first-design/0596007124/ch02.html&text=Head%20First%20Design%20Patterns&via=safari"
      ><span>Twitter</span></a></li><li><a
        class="facebook share-button t-facebook"
        target="_blank"
        aria-label="Share this section on Facebook"
        title="Share this section on Facebook"
        href="https://www.facebook.com/sharer/sharer.php?u=https://learning.oreilly.com/library/view/head-first-design/0596007124/ch02.html"
      ><span>Facebook</span></a></li><li><a
        class="googleplus share-button t-googleplus"
        target="_blank"
        aria-label="Share this secton on Google Plus"
        title="Share this secton on Google Plus"
        href="https://plus.google.com/share?url=https://learning.oreilly.com/library/view/head-first-design/0596007124/ch02.html"
      ><span>Google Plus</span></a></li><li><a
        class="email share-button t-email"
        aria-label="Share this section via email"
        title="Share this section via email"
      
        href="mailto:?subject=Safari: 2.%20The%20Observer%20Pattern%3A%20Keeping%20your%20Objects%20in%20the%20know&body=https://learning.oreilly.com/library/view/head-first-design/0596007124/ch02.html%0D%0Afrom Head%20First%20Design%20Patterns%0D%0A"
      ><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    
    <section role="document">
        
        




  <script defer src="/static/js/build/djangoMessagesPage.9240133f6829.js"></script>


        
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/library/view/head-first-design/0596007124/ch01.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">1. Intro to Design Patterns: Welcome to Design Patterns</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/library/view/head-first-design/0596007124/ch03.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">3. The Decorator Pattern: Decorating Objects</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><section class="chapter" title="Chapter 2. The Observer Pattern: Keeping your Objects in the know" epub:type="chapter" id="observer_pattern_keeping_your_objects_in"><div class="titlepage"><div><div><h2 class="title">Chapter 2. The Observer Pattern: Keeping your Objects in the know</h2></div></div></div><div class="informalfigure"><a id="med_id00068a"></a><div class="mediaobject"><a id="med_id00068"></a><img src="/library/view/head-first-design/0596007124/figs/web/037fig01.png.jpg" alt="image with no caption" width="595" height="450"></div></div><p><a id="iddle2029" class="indexterm"></a><span class="strong"><strong>Don’t miss out when something interesting happens!</strong></span> We’ve got a pattern that keeps your objects in the know when something they might care about happens. Objects can even decide at runtime whether they want to be kept informed. The Observer Pattern is one of the most heavily used patterns in the JDK, and it’s incredibly useful. Before we’re done, we’ll also look at one-to-many relationships and loose coupling (yeah, that’s right, we said coupling). With Observer, you’ll be the life of the Patterns Party.</p><p><span class="strong"><strong>Congratulations!</strong></span></p><p><span class="strong"><strong>Your team has just won the contract to build Weather-O-Rama, Inc.’s next-generation, Internet-based Weather Monitoring Station.</strong></span></p><div class="informaltable"><table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="c1"></colgroup><tbody><tr><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00069a"></a><img src="/library/view/head-first-design/0596007124/figs/web/038fig01.png.jpg" alt="" width="231" height="112"></span></p></td></tr><tr><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Statement of Work</strong></span></p></td></tr><tr><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Congratulations on being selected to build our next-generation, Internet-based Weather Monitoring Station!</p></td></tr><tr><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>The weather station will be based on our patent pending WeatherData object, which tracks current weather conditions (temperature, humidity, and barometric pressure). We’d like you to create an application that initially provides three display elements: current conditions, weather statistics, and a simple forecast, all updated in real time as the WeatherData object acquires the most recent measurements.</p></td></tr><tr><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Further, this is an expandable weather station. Weather-ORama wants to release an API so that other developers can write their own weather displays and plug them right in. We’d like for you to supply that API!</p></td></tr><tr><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Weather-O-Rama thinks we have a great business model: once the customers are hooked, we intend to charge them for each display they use. Now for the best part: we are going to pay you in stock options.</p></td></tr><tr><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>We look forward to seeing your design and alpha application.</p></td></tr><tr><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Sincerely,</p></td></tr><tr><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00070a"></a><img src="/library/view/head-first-design/0596007124/figs/web/038fig02.png.jpg" alt="" width="182" height="54"></span></p></td></tr><tr><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Johnny Hurricane, CEO</p></td></tr><tr><td style="vertical-align: top; "><p>P.S. We are overnighting the WeatherData source files to you.</p></td></tr></tbody></table></div><div class="sect1" title="The Weather Monitoring application overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="weather_monitoring_application_overview">The Weather Monitoring application overview</h2></div></div></div><p>The three players in the system are the weather station (the physical device that acquires the actual weather data), the WeatherData object (that tracks the data coming from the Weather Station and updates the displays), and the display that shows users the current weather conditions.</p><div class="informalfigure"><a id="med_id00071a"></a><div class="mediaobject"><a id="med_id00071"></a><img src="/library/view/head-first-design/0596007124/figs/web/039fig01.png.jpg" alt="image with no caption" width="778" height="468"></div></div><p>The WeatherData object knows how to talk to the physical Weather Station, to get updated data. The WeatherData object then updates its displays for the three different display elements: Current Conditions (shows temperature, humidity, and pressure), Weather Statistics, and a simple forecast.</p><p><span class="strong"><strong>Our job, if we choose to accept it, is to create an app that uses the WeatherData object to update three displays for current conditions, weather stats, and a forecast.</strong></span></p></div><div class="sect1" title="Unpacking the WeatherData class"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="unpacking_the_weatherdata_class">Unpacking the WeatherData class</h2></div></div></div><p><a id="iddle2057" class="indexterm"></a><a id="iddle2511" class="indexterm"></a><span class="strong"><strong>As promised, the next morning the WeatherData source files arrive. When we peek inside the code, things look pretty straightforward:</strong></span></p><div class="informalfigure"><a id="med_id00072a"></a><div class="mediaobject"><a id="med_id00072"></a><img src="/library/view/head-first-design/0596007124/figs/web/040fig01.png.jpg" alt="image with no caption" width="704" height="460"></div></div><div class="informalfigure"><a id="med_id00073a"></a><div class="mediaobject"><a id="med_id00073"></a><img src="/library/view/head-first-design/0596007124/figs/web/040fig02.png.jpg" alt="image with no caption" width="228" height="314"></div></div><p><span class="strong"><strong>Our job is to implement measurementsChanged() so that it updates the three displays for current conditions, weather stats, and forecast.</strong></span></p></div><div class="sect1" title="What do we know so far?"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="what_do_we_know_so_farquestion_mark">What do we know so far?</h2></div></div></div><div class="informalfigure"><a id="med_id00074a"></a><div class="mediaobject"><a id="med_id00074"></a><img src="/library/view/head-first-design/0596007124/figs/web/common6.png.jpg" alt="image with no caption" width="67" height="128"></div></div><p>The spec from Weather-O-Rama wasn’t all that clear, but we have to figure out what we need to do. So, what do we know so far?</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="c1"><col class="c2"></colgroup><tbody><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00016"></a><img src="/library/view/head-first-design/0596007124/figs/web/common7.png.jpg" alt="" width="25" height="24"></span></p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>The WeatherData class has getter methods for three measurement values: temperature, humidity, and barometric pressure.</p>
<a id="pro_id00005"></a><pre class="programlisting"><span class="strong"><strong>getTemperature()</strong></span>
<span class="strong"><strong>getHumidity()</strong></span>
<span class="strong"><strong>getPressure()</strong></span></pre></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00017"></a><img src="/library/view/head-first-design/0596007124/figs/web/common7.png.jpg" alt="" width="25" height="24"></span></p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>The measurementsChanged() method is called any time new weather measurement data is available. (We don’t know or care how this method is called; we just know that it <span class="emphasis"><em>is.</em></span>)</p>
<a id="pro_id00006"></a><pre class="programlisting"><span class="strong"><strong>measurementsChanged()</strong></span></pre></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00018"></a><img src="/library/view/head-first-design/0596007124/figs/web/common7.png.jpg" alt="" width="25" height="24"></span></p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>We need to implement three display elements that use the weather data: a <span class="emphasis"><em>current conditions</em></span> display, a <span class="emphasis"><em>statistics display,</em></span> and a <span class="emphasis"><em>forecast</em></span> display. These displays must be updated each time WeatherData has new measurements. <span class="inlinemediaobject"><a id="inline_id00075a"></a><img src="/library/view/head-first-design/0596007124/figs/web/041fig01.png.jpg" alt="" width="338" height="477"></span></p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00019"></a><img src="/library/view/head-first-design/0596007124/figs/web/common7.png.jpg" alt="" width="25" height="24"></span></p></td><td style="vertical-align: top; "><p>The system must be expandable—other developers can create new custom display elements and users can add or remove as many display elements as they want to the application. Currently, we know about only the initial <span class="emphasis"><em>three</em></span> display types (current conditions, statistics, and forecast). <span class="inlinemediaobject"><a id="inline_id00076a"></a><img src="/library/view/head-first-design/0596007124/figs/web/041fig02.png.jpg" alt="" width="153" height="229"></span></p></td></tr></tbody></table></div></div><div class="sect1" title="Taking a first, misguided SWAG at the Weather Station"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="taking_a_firstcomma_misguided_swag_at_th">Taking a first, misguided SWAG at the Weather Station</h2></div></div></div><p><a id="iddle1564" class="indexterm"></a><a id="iddle2056" class="indexterm"></a><a id="iddle2309" class="indexterm"></a><a id="iddle2446" class="indexterm"></a><a id="iddle2510" class="indexterm"></a>Here’s a first implementation possibility—we’ll take the hint from the Weather-O-Rama developers and add our code to the measurementsChanged() method:</p><div class="informalfigure"><a id="med_id00077a"></a><div class="mediaobject"><a id="med_id00077"></a><img src="/library/view/head-first-design/0596007124/figs/web/042fig01.png.jpg" alt="image with no caption" width="703" height="406"></div></div><div class="sidebar"><a id="sharpen_your_pencil-id00005"></a><div class="sidebar-title">Sharpen your pencil</div><p>Based on our first implementation, which of the following apply? (Choose all that apply.)</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00020"></a><img src="/library/view/head-first-design/0596007124/figs/web/square.png.jpg" alt="" width="17" height="17"></span></p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>A.</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>We are coding to concrete implementations, not interfaces.</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00021"></a><img src="/library/view/head-first-design/0596007124/figs/web/square.png.jpg" alt="" width="17" height="17"></span></p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>B.</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>For every new display element we need to alter code.</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00022"></a><img src="/library/view/head-first-design/0596007124/figs/web/square.png.jpg" alt="" width="17" height="17"></span></p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>C.</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>We have no way to add (or remove) display elements at run time.</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00023"></a><img src="/library/view/head-first-design/0596007124/figs/web/square.png.jpg" alt="" width="17" height="17"></span></p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>D.</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>The display elements don’t implement a common interface.</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00024"></a><img src="/library/view/head-first-design/0596007124/figs/web/square.png.jpg" alt="" width="17" height="17"></span></p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>E.</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>We haven’t encapsulated the part that changes.</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00025"></a><img src="/library/view/head-first-design/0596007124/figs/web/square.png.jpg" alt="" width="17" height="17"></span></p></td><td style="vertical-align: top; border-right: 0.5pt solid ; "><p>F.</p></td><td style="vertical-align: top; "><p>We are violating encapsulation of the WeatherData class.</p></td></tr></tbody></table></div></div><p>Definition of SWAG: Scientific Wild A** Guess</p></div><div class="sect1" title="What’s wrong with our implementation?"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="whatapostrophes_wrong_with_our_implement">What’s wrong with our implementation?</h2></div></div></div><p><a id="iddle1773" class="indexterm"></a>Think back to all those <a class="xref" href="ch01.html" title="Chapter 1. Intro to Design Patterns: Welcome to Design Patterns">Chapter 1</a> concepts and principles...</p><div class="informalfigure"><a id="med_id00078a"></a><div class="mediaobject"><a id="med_id00078"></a><img src="/library/view/head-first-design/0596007124/figs/web/043fig01.png.jpg" alt="image with no caption" width="728" height="383"></div></div><div class="informalfigure"><a id="med_id00079a"></a><div class="mediaobject"><a id="med_id00079"></a><img src="/library/view/head-first-design/0596007124/figs/web/043fig02.png.jpg" alt="image with no caption" width="362" height="338"></div></div><p>We’ll take a look at Observer, then come back and figure out how to apply it to the Weather Monitoring app.</p></div><div class="sect1" title="Meet the Observer Pattern"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="meet_the_observer_pattern">Meet the Observer Pattern</h2></div></div></div><p><a id="iddle2030" class="indexterm"></a><span class="strong"><strong>You know how newspaper or magazine subscriptions work:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: none"><p>① A newspaper publisher goes into business and begins publishing newspapers.</p></li><li class="listitem" style="list-style-type: none"><p>② You subscribe to a particular publisher, and every time there’s a new edition it gets delivered to you. As long as you remain a subscriber, you get new newspapers.</p></li><li class="listitem" style="list-style-type: none"><p>③ You unsubscribe when you don’t want papers anymore, and they stop being delivered.</p></li><li class="listitem" style="list-style-type: none"><p>④ While the publisher remains in business, people, hotels, airlines, and other businesses constantly subscribe and unsubscribe to the newspaper.</p></li></ul></div><div class="informalfigure"><a id="med_id00080a"></a><div class="mediaobject"><a id="med_id00080"></a><img src="/library/view/head-first-design/0596007124/figs/web/044fig01.png.jpg" alt="image with no caption" width="594" height="409"></div></div></div><div class="sect1" title="Publishers + Subscribers = Observer Pattern"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="publishers_plus_subscribers_equals_obser">Publishers + Subscribers = Observer Pattern</h2></div></div></div><p><a id="iddle2045" class="indexterm"></a><a id="iddle2048" class="indexterm"></a><a id="iddle2049" class="indexterm"></a><a id="iddle2061" class="indexterm"></a><a id="iddle2202" class="indexterm"></a><a id="iddle2441" class="indexterm"></a><span class="strong"><strong>If you understand newspaper subscriptions, you pretty much understand the Observer Pattern, only we call the publisher the SUBJECT and the subscribers the OBSERVERS.</strong></span></p><p><span class="strong"><strong>Let’s take a closer look:</strong></span></p><div class="informalfigure"><a id="med_id00081a"></a><div class="mediaobject"><a id="med_id00081"></a><img src="/library/view/head-first-design/0596007124/figs/web/045fig01.png.jpg" alt="image with no caption" width="782" height="571"></div></div></div><div class="sect1" title="A day in the life of the Observer Pattern"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="day_in_the_life_of_the_observer_pattern">A day in the life of the Observer Pattern</h2></div></div></div><div class="informaltable"><table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="c1"><col class="c2"></colgroup><tbody><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><a id="iddle2047" class="indexterm"></a><span class="strong"><strong>A Duck object comes along and tells the Subject that it wants to become an observer.</strong></span></p>
<p>Duck really wants in on the action; those ints Subject is sending out whenever its state changes look pretty interesting...</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00082a"></a><img src="/library/view/head-first-design/0596007124/figs/web/046fig01.png.jpg" alt="" width="561" height="283"></span></p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>The Duck object is now an official observer.</strong></span></p>
<p>Duck is psyched... he’s on the list and is waiting with great anticipation for the next notification so he can get an int.</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00083a"></a><img src="/library/view/head-first-design/0596007124/figs/web/046fig02.png.jpg" alt="" width="433" height="283"></span></p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>The Subject gets a new data value!</strong></span></p>
<p>Now Duck and all the rest of the observers get a notification that the Subject has changed.</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00084a"></a><img src="/library/view/head-first-design/0596007124/figs/web/046fig03.png.jpg" alt="" width="430" height="283"></span></p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>The Mouse object asks to be removed as an observer.</strong></span></p>
<p>The Mouse object has been getting ints for ages and is tired of it, so it decides it’s time to stop being an observer.</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00085a"></a><img src="/library/view/head-first-design/0596007124/figs/web/047fig01.png.jpg" alt="" width="425" height="283"></span></p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Mouse is outta here!</strong></span></p>
<p>The Subject acknowledges the Mouse’s request and removes it from the set of observers.</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00086a"></a><img src="/library/view/head-first-design/0596007124/figs/web/047fig02.png.jpg" alt="" width="440" height="283"></span></p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; "><p><span class="strong"><strong>The Subject has another new int.</strong></span></p>
<p>All the observers get another notification, except for the Mouse who is no longer included. Don’t tell anyone, but the Mouse secretly misses those ints... maybe it’ll ask to be an observer again some day.</p></td><td style="vertical-align: top; "><p><span class="inlinemediaobject"><a id="inline_id00087a"></a><img src="/library/view/head-first-design/0596007124/figs/web/047fig03.png.jpg" alt="" width="438" height="283"></span></p></td></tr></tbody></table></div></div><div class="sect1" title="Five-minute drama: a subject for observation"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="five-minute_drama_a_subject_for_observat">Five-minute drama: a subject for observation</h2></div></div></div><div class="informalfigure"><a id="med_id00088a"></a><div class="mediaobject"><a id="med_id00088"></a><img src="/library/view/head-first-design/0596007124/figs/web/common8.png.jpg" alt="image with no caption" width="76" height="79"></div></div><p><a id="iddle2039" class="indexterm"></a><a id="iddle2060" class="indexterm"></a><a id="iddle2440" class="indexterm"></a>In today’s skit, two post-bubble software developers encounter a real live head hunter...</p><div class="informalfigure"><a id="med_id00089a"></a><div class="mediaobject"><a id="med_id00089"></a><img src="/library/view/head-first-design/0596007124/figs/web/048fig01.png.jpg" alt="image with no caption" width="744" height="759"></div></div><div class="informalfigure"><a id="med_id00090a"></a><div class="mediaobject"><a id="med_id00090"></a><img src="/library/view/head-first-design/0596007124/figs/web/049fig01.png.jpg" alt="image with no caption" width="728" height="839"></div></div></div><div class="sect1" title="Two weeks later..."><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="two_weeks_laterhellip">Two weeks later...</h2></div></div></div><div class="informalfigure"><a id="med_id00091a"></a><div class="mediaobject"><a id="med_id00091"></a><img src="/library/view/head-first-design/0596007124/figs/web/050fig01.png.jpg" alt="image with no caption" width="124" height="222"></div></div><p>Jill’s loving life, and no longer an observer. She’s also enjoying the nice fat signing bonus that she got because the company didn’t have to pay a headhunter.</p><div class="informalfigure"><a id="med_id00092a"></a><div class="mediaobject"><a id="med_id00092"></a><img src="/library/view/head-first-design/0596007124/figs/web/050fig02.png.jpg" alt="image with no caption" width="181" height="199"></div></div><p>But what has become of our dear Lori? We hear she’s beating the headhunter at his own game. She’s not only still an observer, she’s got her own call list now, and she is notifying her own observers. Lori’s a subject and an observer all in one.</p></div><div class="sect1" title="The Observer Pattern defined"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="observer_pattern_defined">The Observer Pattern defined</h2></div></div></div><p><a id="iddle1105" class="indexterm"></a><a id="iddle2031" class="indexterm"></a><a id="iddle2034" class="indexterm"></a><a id="iddle2046" class="indexterm"></a><a id="iddle2076" class="indexterm"></a>When you’re trying to picture the Observer Pattern, a newspaper subscription service with its publisher and subscribers is a good way to visualize the pattern.</p><p>In the real world, however, you’ll typically see the Observer Pattern defined like this:</p><div class="note" title="Note"><h3 class="title"><a id="ch02note01"></a>Note</h3><p><span class="strong"><strong>The Observer Pattern</strong></span> defines a one-to-many dependency between objects so that when one object changes state, all of its dependents are notified and updated automatically.</p></div><p>Let’s relate this definition to how we’ve been talking about the pattern:</p><div class="informalfigure"><a id="med_id00093a"></a><div class="mediaobject"><a id="med_id00093"></a><img src="/library/view/head-first-design/0596007124/figs/web/051fig01.png.jpg" alt="image with no caption" width="551" height="376"></div></div><div class="blockquote"><blockquote class="blockquote"><p><span class="strong"><strong>The Observer Pattern defines a one-to-many relationship between a set of objects.</strong></span></p><p><span class="strong"><strong>When the state of one object changes, all of its dependents are notified.</strong></span></p></blockquote></div><p>The subject and observers define the one-to-many relationship. The observers are dependent on the subject such that when the subject’s state changes, the observers get notified. Depending on the style of notification, the observer may also be updated with new values.</p><p>As you’ll discover, there are a few different ways to implement the Observer Pattern, but most revolve around a class design that includes Subject and Observer interfaces.</p><p>Let’s take a look...</p></div><div class="sect1" title="The Observer Pattern defined: the class diagram"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="observer_pattern_defined_the_class_diagr">The Observer Pattern defined: the class diagram</h2></div></div></div><div class="informalfigure"><a id="med_id00094a"></a><div class="mediaobject"><a id="med_id00094"></a><img src="/library/view/head-first-design/0596007124/figs/web/052fig01.png.jpg" alt="image with no caption" width="951" height="687"></div></div><div class="sidebar"><a id="there_are_no_dumb_questions-id00006"></a><div class="sidebar-title">There Are No Dumb Questions</div><div class="blockquote"><blockquote class="blockquote"><div class="qandaset" title="Frequently Asked Questions"><table style="border: 0; width: 100%; "><colgroup><col style="text-align: left; width: 1%; "><col></colgroup><tbody><tr class="question" title="Q:"><td style="text-align: left; vertical-align: top; "><a id="ch02qa1qe1"></a><a id="ch02qa1q1"></a><p><strong>Q:</strong></p></td><td style="text-align: left; vertical-align: top; "><p><a id="iddle1369" class="indexterm"></a><a id="iddle2035" class="indexterm"></a><a id="iddle2059" class="indexterm"></a><a id="iddle2439" class="indexterm"></a><span class="strong"><strong>Q: What does this have to do with one-to-many relationships?</strong></span></p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "><a id="ch02qa1q1a1"></a><p><strong>A:</strong></p></td><td style="text-align: left; vertical-align: top; "><p><span class="strong"><strong>A:</strong></span> With the Observer Pattern, the Subject is the object that contains the state and controls it. So, there is ONE subject with state. The observers, on the other hand, use the state, even if they don’t own it. There are many observers and they rely on the Subject to tell them when its state changes. So there is a relationship between the ONE Subject to the MANY Observers.</p></td></tr><tr class="question" title="Q:"><td style="text-align: left; vertical-align: top; "><a id="ch02qa1qe2"></a><a id="ch02qa1q2"></a><p><strong>Q:</strong></p></td><td style="text-align: left; vertical-align: top; "><p><span class="strong"><strong>Q: How does dependence come into this?</strong></span></p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "><a id="ch02qa1q2a2"></a><p><strong>A:</strong></p></td><td style="text-align: left; vertical-align: top; "><p><span class="strong"><strong>A:</strong></span> Because the subject is the sole owner of that data, the observers are dependent on the subject to update them when the data changes. This leads to a cleaner OO design than allowing many objects to control the same data.</p></td></tr></tbody></table></div></blockquote></div></div></div><div class="sect1" title="The power of Loose Coupling"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="power_of_loose_coupling">The power of Loose Coupling</h2></div></div></div><p><a id="iddle1100" class="indexterm"></a><a id="iddle1425" class="indexterm"></a><a id="iddle1890" class="indexterm"></a><a id="iddle2015" class="indexterm"></a><a id="iddle2020" class="indexterm"></a><a id="iddle2044" class="indexterm"></a><a id="iddle2086" class="indexterm"></a><a id="iddle2476" class="indexterm"></a><span class="strong"><strong>When two objects are loosely coupled, they can interact, but have very little knowledge of each other.</strong></span></p><p><span class="strong"><strong>The Observer Pattern provides an object design where subjects and observers are loosely coupled.</strong></span></p><p><span class="strong"><strong>Why?</strong></span></p><p><span class="strong"><strong>The only thing the subject knows about an observer is that it implements a certain interface (the Observer interface).</strong></span> It doesn’t need to know the concrete class of the observer, what it does, or anything else about it.</p><p><span class="strong"><strong>We can add new observers at any time.</strong></span> Because the only thing the subject depends on is a list of objects that implement the Observer interface, we can add new observers whenever we want. In fact, we can replace any observer at runtime with another observer and the subject will keep purring along. Likewise, we can remove observers at any time.</p><p><span class="strong"><strong>We never need to modify the subject to add new types of observers.</strong></span> Let’s say we have a new concrete class come along that needs to be an observer. We don’t need to make any changes to the subject to accommodate the new class type; all we have to do is implement the Observer interface in the new class and register as an observer. The subject doesn’t care; it will deliver notifications to any object that implements the Observer interface.</p><p><span class="strong"><strong>We can reuse subjects or observers independently of each other.</strong></span> If we have another use for a subject or an observer, we can easily reuse them because the two aren’t tightly coupled.</p><p><span class="strong"><strong>Changes to either the subject or an observer will not affect the other.</strong></span> Because the two are loosely coupled, we are free to make changes to either, as long as the objects still meet their obligations to implement the subject or observer interfaces.</p><div class="note" title="Note"><h3 class="title"><a id="ch02note02"></a>Note</h3><p>How many different kinds of change can you identify here?</p></div><div class="note" title="Design Principle"><h3 class="title"><a id="ch02note03"></a>Design Principle</h3><p><span class="emphasis"><em>Strive for loosely coupled designs between objects that interact.</em></span></p></div><p><span class="strong"><strong>Loosely coupled designs allow us to build flexible OO systems that can handle change because they minimize the interdependency between objects.</strong></span></p><div class="sidebar"><a id="sharpen_your_pencil-id00007"></a><div class="sidebar-title">Sharpen your pencil</div><p><a id="iddle1559" class="indexterm"></a><a id="iddle2304" class="indexterm"></a>Before moving on, try sketching out the classes you’ll need to implement the Weather Station, including the WeatherData class and its display elements. Make sure your diagram shows how all the pieces fit together and also how another developer might implement her own display element.</p><p>If you need a little help, read the next page; your teammates are already talking about how to design the Weather Station.</p></div></div><div class="sect1" title="Cubicle conversation"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cubicle_conversation">Cubicle conversation</h2></div></div></div><p>Back to the Weather Station project. Your teammates have already started thinking through the problem...</p><div class="informalfigure"><a id="med_id00095a"></a><div class="mediaobject"><a id="med_id00095"></a><img src="/library/view/head-first-design/0596007124/figs/web/055fig01.png.jpg" alt="image with no caption" width="263" height="472"></div></div><p><span class="strong"><strong>Mary:</strong></span> Well, it helps to know we’re using the Observer Pattern.</p><p><span class="strong"><strong>Sue:</strong></span> Right... but how do we apply it?</p><p><span class="strong"><strong>Mary:</strong></span> Hmm. Let’s look at the definition again:</p><p><span class="emphasis"><em>The Observer Pattern defines a one-to-many dependency between objects so that when one object changes state, all its dependents are notified and updated automatically.</em></span></p><p><span class="strong"><strong>Mary:</strong></span> That actually makes some sense when you think about it. Our WeatherData class is the “one” and our “many” is the various display elements that use the weather measurements.</p><p><span class="strong"><strong>Sue:</strong></span> That’s right. The WeatherData class certainly has state... that’s the temperature, humidity, and barometric pressure, and those definitely change.</p><p><span class="strong"><strong>Mary:</strong></span> Yup, and when those measurements change, we have to notify all the display elements so they can do whatever it is they are going to do with the measurements.</p><p><span class="strong"><strong>Sue:</strong></span> Cool, I now think I see how the Observer Pattern can be applied to our Weather Station problem.</p><p><span class="strong"><strong>Mary:</strong></span> There are still a few things to consider that I’m not sure I understand yet.</p><p><span class="strong"><strong>Sue:</strong></span> Like what?</p><p><span class="strong"><strong>Mary:</strong></span> For one thing, how do we get the weather measurements to the display elements?</p><p><span class="strong"><strong>Sue:</strong></span> Well, looking back at the picture of the Observer Pattern, if we make the WeatherData object the subject, and the display elements the observers, then the displays will register themselves with the WeatherData object in order to get the information they want, right?</p><p><span class="strong"><strong>Mary:</strong></span> Yes... and once the Weather Station knows about a display element, then it can just call a method to tell it about the measurements.</p><p><span class="strong"><strong>Sue:</strong></span> We gotta remember that every display element can be different... so I think that’s where having a common interface comes in. Even though every component has a different type, they should all implement the same interface so that the WeatherData object will know how to send them the measurements.</p><p><span class="strong"><strong>Mary:</strong></span> I see what you mean. So every display will have, say, an update() method that WeatherData will call.</p><p><span class="strong"><strong>Sue:</strong></span> And update() is defined in a common interface that all the elements implement...</p></div><div class="sect1" title="Designing the Weather Station"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="designing_the_weather_station">Designing the Weather Station</h2></div></div></div><p><a id="iddle2053" class="indexterm"></a><a id="iddle2507" class="indexterm"></a>How does this diagram compare with yours?</p><div class="informalfigure"><a id="med_id00096a"></a><div class="mediaobject"><a id="med_id00096"></a><img src="/library/view/head-first-design/0596007124/figs/web/056fig01.png.jpg" alt="image with no caption" width="1000" height="995"></div></div></div><div class="sect1" title="Implementing the Weather Station"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="implementing_the_weather_station">Implementing the Weather Station</h2></div></div></div><p><a id="iddle2054" class="indexterm"></a><a id="iddle2508" class="indexterm"></a>We’re going to start our implementation using the class diagram and following Mary and Sue’s lead (from a few pages back). You’ll see later in this chapter that Java provides some built-in support for the Observer Pattern, however, we’re going to get our hands dirty and roll our own for now. While in some cases you can make use of Java’s built-in support, in a lot of cases it’s more flexible to build your own (and it’s not all that hard). So, let’s get started with the interfaces:</p><div class="informalfigure"><a id="med_id00097a"></a><div class="mediaobject"><a id="med_id00097"></a><img src="/library/view/head-first-design/0596007124/figs/web/057fig01.png.jpg" alt="image with no caption" width="796" height="461"></div></div><div class="note" title="Brain Power"><h3 class="title"><a id="ch02note04"></a>Brain Power</h3><p>Mary and Sue thought that passing the measurements directly to the observers was the most straightforward method of updating state. Do you think this is wise? Hint: is this an area of the application that might change in the future? If it did change, would the change be well encapsulated, or would it require changes in many parts of the code?</p><p>Can you think of other ways to approach the problem of passing the updated state to the observers?</p><p>Don’t worry; we’ll come back to this design decision after we finish the initial implementation.</p></div></div><div class="sect1" title="Implementing the Subject interface in WeatherData"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="implementing_the_subject_interface_in_we">Implementing the Subject interface in WeatherData</h2></div></div></div><div class="blockquote"><blockquote class="blockquote"><p>REMEMBER: we don’t provide import and package statements in the code listings. Get the complete source code from <a class="ulink" href="http://wickedlysmart.com/head-first-design-patterns/" target="_top">http://wickedlysmart.com/head-first-design-patterns/</a>.</p></blockquote></div><p>Remember our first attempt at implementing the WeatherData class at the beginning of the chapter? You might want to refresh your memory. Now it’s time to go back and do things with the Observer Pattern in mind...</p><div class="informalfigure"><a id="med_id00098a"></a><div class="mediaobject"><a id="med_id00098"></a><img src="/library/view/head-first-design/0596007124/figs/web/058fig01.png.jpg" alt="image with no caption" width="809" height="778"></div></div></div><div class="sect1" title="Now, let’s build those display elements"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="nowcomma_letapostrophes_build_those_disp">Now, let’s build those display elements</h2></div></div></div><p><a id="iddle2052" class="indexterm"></a><a id="iddle2506" class="indexterm"></a>Now that we’ve got our WeatherData class straightened out, it’s time to build the Display Elements. Weather-O-Rama ordered three: the current conditions display, the statistics display, and the forecast display. Let’s take a look at the current conditions display; once you have a good feel for this display element, check out the statistics and forecast displays in the code directory. You’ll see they are very similar.</p><div class="informalfigure"><a id="med_id00099a"></a><div class="mediaobject"><a id="med_id00099"></a><img src="/library/view/head-first-design/0596007124/figs/web/059fig01.png.jpg" alt="image with no caption" width="804" height="555"></div></div><div class="sidebar"><a id="there_are_no_dumb_questions-id00008"></a><div class="sidebar-title">There Are No Dumb Questions</div><div class="blockquote"><blockquote class="blockquote"><div class="qandaset" title="Frequently Asked Questions"><table style="border: 0; width: 100%; "><colgroup><col style="text-align: left; width: 1%; "><col></colgroup><tbody><tr class="question" title="Q:"><td style="text-align: left; vertical-align: top; "><a id="ch02qa2qe1"></a><a id="ch02qa2q1"></a><p><strong>Q:</strong></p></td><td style="text-align: left; vertical-align: top; "><p><span class="strong"><strong>Q: Is update() the best place to call display?</strong></span></p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "><a id="ch02qa2q1a1"></a><p><strong>A:</strong></p></td><td style="text-align: left; vertical-align: top; "><p><span class="strong"><strong>A:</strong></span> In this simple example it made sense to call display() when the values changed. However, you are right; there are much better ways to design the way the data gets displayed. We are going to see this when we get to the Model-View-Controller pattern.</p></td></tr><tr class="question" title="Q:"><td style="text-align: left; vertical-align: top; "><a id="ch02qa2qe2"></a><a id="ch02qa2q2"></a><p><strong>Q:</strong></p></td><td style="text-align: left; vertical-align: top; "><p><span class="strong"><strong>Q: Why did you store a reference to the Subject? It doesn’t look like you use it again after the constructor.</strong></span></p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "><a id="ch02qa2q2a2"></a><p><strong>A:</strong></p></td><td style="text-align: left; vertical-align: top; "><p><span class="strong"><strong>A:</strong></span> True, but in the future we may want to un-register ourselves as an observer and it would be handy to already have a reference to the subject.</p></td></tr></tbody></table></div></blockquote></div></div></div><div class="sect1" title="Power up the Weather Station"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="power_up_the_weather_station">Power up the Weather Station</h2></div></div></div><div class="informalfigure"><a id="med_id00100a"></a><div class="mediaobject"><a id="med_id00100"></a><img src="/library/view/head-first-design/0596007124/figs/web/common6.png.jpg" alt="image with no caption" width="67" height="128"></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: none"><p>① <a id="iddle2055" class="indexterm"></a><a id="iddle2509" class="indexterm"></a><span class="strong"><strong>First, let’s create a test harness.</strong></span></p><p>The Weather Station is ready to go. All we need is some code to glue everything together. Here’s our first attempt. We’ll come back later in the book and make sure all the components are easily pluggable via a configuration file. For now here’s how it all works:</p><div class="informalfigure"><a id="med_id00101a"></a><div class="mediaobject"><a id="med_id00101"></a><img src="/library/view/head-first-design/0596007124/figs/web/060fig01.png.jpg" alt="image with no caption" width="824" height="373"></div></div></li><li class="listitem" style="list-style-type: none"><p><span class="strong"><strong>② Run the code and let the Observer Pattern do its magic.</strong></span></p><div class="informalfigure"><a id="med_id00102a"></a><div class="mediaobject"><a id="med_id00102"></a><img src="/library/view/head-first-design/0596007124/figs/web/060fig02.png.jpg" alt="image with no caption" width="563" height="269"></div></div></li></ul></div><div class="sidebar"><a id="sharpen_your_pencil-id00009"></a><div class="sidebar-title">Sharpen your pencil</div><p><a id="iddle2282" class="indexterm"></a>Johnny Hurricane, Weather-O-Rama’s CEO, just called and they can’t possibly ship without a Heat Index display element. Here are the details.</p><p>The heat index is an index that combines temperature and humidity to determine the apparent temperature (how hot it actually feels). To compute the heat index, you take the temperature, T, and the relative humidity, RH, and use this formula:</p><a id="pro_id00007"></a><pre class="programlisting"><span class="strong"><strong>heatindex =</strong></span>

    <span class="strong"><strong>16.923 + 1.85212 * 10<sup>-1</sup> * T + 5.37941 * RH - 1.00254 * 10<sup>-1</sup> *</strong></span>
    <span class="strong"><strong>T * RH + 9.41695 * 10<sup>-3</sup> * T<sup>2</sup> + 7.28898 * 10<sup>-3</sup> * RH<sup>2</sup> + 3.45372 *</strong></span>
    <span class="strong"><strong>10<sup>-4</sup> * T<sup>2</sup> * RH - 8.14971 * 10<sup>-4</sup> * T * RH<sup>2</sup> + 1.02102 * 10<sup>-5</sup> * T<sup>2</sup> *</strong></span>
    <span class="strong"><strong>RH<sup>2</sup> - 3.8646 * 10<sup>-5</sup> * T<sup>3</sup> + 2.91583 * 10<sup>-5</sup> * RH<sup>3</sup> + 1.42721 * 10<sup>-6</sup></strong></span>
    <span class="strong"><strong>* T<sup>3</sup> * RH + 1.97483 * 10<sup>-7</sup> * T * RH<sup>3</sup> - 2.18429 * 10<sup>-8</sup> * T<sup>3</sup> * RH<sup>2</sup></strong></span>
    <span class="strong"><strong>+ 8.43296 * 10<sup>-10</sup> * T<sup>2</sup> * RH<sup>3</sup> - 4.81975 * 10<sup>-11</sup> * T<sup>3</sup> * RH<sup>3</sup></strong></span></pre><p>So get typing!</p><p>Just kidding. Don’t worry, you won’t have to type that formula in; just create your own HeatIndexDisplay.java file and copy the formula from heatindex.txt into it.</p><div class="note" title="Note"><h3 class="title"><a id="ch02note05"></a>Note</h3><p>You can get heatindex.txt from wickedlysmart.com.</p></div><p>How does it work? You’d have to refer to <span class="emphasis"><em>Head First Meteorology</em></span>, or try asking someone at the National Weather Service (or try a web search).</p><p>When you finish, your output should look like this:</p><div class="informalfigure"><a id="med_id00103a"></a><div class="mediaobject"><a id="med_id00103"></a><img src="/library/view/head-first-design/0596007124/figs/web/061fig01.png.jpg" alt="image with no caption" width="748" height="363"></div></div></div><div class="sidebar"><a id="fireside_chats"></a><div class="sidebar-title"><code class="literal">Fireside Chats</code></div><p>Tonight’s talk: <span class="strong"><strong>A Subject and Observer spar over the right way to get state information to the Observer.</strong></span></p><div class="informaltable"><table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Subject:</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Observer:</p></td></tr></thead><tbody><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>I’m glad we’re finally getting a chance to chat in person.</p></td><td style="border-bottom: 0.5pt solid ; "> </td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> </td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Really? I thought you didn’t care much about us Observers.</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Well, I do my job, don’t I? I always tell you what’s going on... Just because I don’t really know who you are doesn’t mean I don’t care. And besides, I do know the most important thing about you—you implement the Observer interface.</p></td><td style="border-bottom: 0.5pt solid ; "> </td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> </td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Yeah, but that’s just a small part of who I am. Anyway, I know a lot more about you...</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Oh yeah, like what?</p></td><td style="border-bottom: 0.5pt solid ; "> </td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> </td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Well, you’re always passing your state around to us Observers so we can see what’s going on inside you. Which gets a little annoying at times...</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Well, excuuuse me. I have to send my state with my notifications so all you lazy Observers will know what happened!</p></td><td style="border-bottom: 0.5pt solid ; "> </td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> </td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Okay, wait just a minute here; first, we’re not lazy, we just have other stuff to do in between your oh-so-important notifications, Mr. Subject, and second, why don’t you let us come to you for the state we want rather than pushing it out to just everyone?</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Well... I guess that might work. I’d have to open myself up even more, though, to let all you Observers come in and get the state that you need. That might be kind of dangerous. I can’t let you come in and just snoop around looking at everything I’ve got.</p></td><td style="border-bottom: 0.5pt solid ; "> </td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> </td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Why don’t you just write some public getter methods that will let us pull out the state we need?</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Yes, I could let you <span class="strong"><strong>pull</strong></span> my state. But won’t that be less convenient for you? If you have to come to me every time you want something, you might have to make multiple method calls to get all the state you want. That’s why I like <span class="strong"><strong>push</strong></span> better... then you have everything you need in one notification.</p></td><td style="border-bottom: 0.5pt solid ; "> </td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> </td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Don’t be so pushy! There are so many different kinds of us Observers, there’s no way you can anticipate everything we need. Just let us come to you to get the state we need. That way, if some of us only need a little bit of state, we aren’t forced to get it all. It also makes things easier to modify later. Say, for example, you expand yourself and add some more state. If you use pull, you don’t have to go around and change the update calls on every observer; you just need to change yourself to allow more getter methods to access our additional state.</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Well, I can see the advantages to doing it both ways. I have noticed that there is a built-in Java Observer Pattern that allows you to use either push or pull.</p></td><td style="border-bottom: 0.5pt solid ; "> </td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> </td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Oh really? I think we’re going to look at that next....</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Great... maybe I’ll get to see a good example of pull and change my mind.</p></td><td style="border-bottom: 0.5pt solid ; "> </td></tr><tr><td style="border-right: 0.5pt solid ; "> </td><td style="vertical-align: top; "><p>What, us agree on something? I guess there’s always hope.</p></td></tr></tbody></table></div></div></div><div class="sect1" title="Using Java’s built-in Observer Pattern"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="using_javaapostrophes_built-in_observer">Using Java’s built-in Observer Pattern</h2></div></div></div><p><a id="iddle1861" class="indexterm"></a><a id="iddle2051" class="indexterm"></a>So far we’ve rolled our own code for the Observer Pattern, but Java has built-in support in several of its APIs. The most general is the Observer interface and the Observable class in the java.util package. These are quite similar to our Subject and Observer interfaces, but give you a lot of functionality out of the box. You can also implement either a push or pull style of update to your observers, as you will see.</p><p>To get a high-level feel for java.util.Observer and java.util.Observable, check out this reworked OO design for the WeatherStation:</p><div class="informalfigure"><a id="med_id00104a"></a><div class="mediaobject"><a id="med_id00104"></a><img src="/library/view/head-first-design/0596007124/figs/web/064fig01.png.jpg" alt="image with no caption" width="403" height="365"></div></div><div class="informalfigure"><a id="med_id00105a"></a><div class="mediaobject"><a id="med_id00105"></a><img src="/library/view/head-first-design/0596007124/figs/web/064fig02.png.jpg" alt="image with no caption" width="988" height="602"></div></div></div><div class="sect1" title="How Java’s built-in Observer Pattern works"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="how_javaapostrophes_built-in_observer_pa">How Java’s built-in Observer Pattern works</h2></div></div></div><p>The built-in Observer Pattern works a bit differently than the implementation that we used on the Weather Station. The most obvious difference is that WeatherData (our subject) now extends the Observable class and inherits the add, delete, and notify Observer methods (among a few others). Here’s how we use Java’s version:</p><p><span class="strong"><strong>For an Object to become an observer...</strong></span></p><p>As usual, implement the Observer interface (this time the java.util.Observer interface) and call addObserver() on any Observable object. Likewise, to remove yourself as an observer, just call deleteObserver().</p><p><span class="strong"><strong>For the Observable to send notifications...</strong></span></p><p>First of all you need to be Observable by extending the java.util.Observable superclass. From there it is a two-step process:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: none"><p>① You first must call the setChanged() method to signify that the state has changed in your object.</p></li><li class="listitem" style="list-style-type: none"><p>② Then, call one of two notifyObservers() methods:</p><div class="informalfigure"><a id="med_id00106a"></a><div class="mediaobject"><a id="med_id00106"></a><img src="/library/view/head-first-design/0596007124/figs/web/065fig01.png.jpg" alt="image with no caption" width="684" height="382"></div></div></li></ul></div><p><span class="strong"><strong>For an Observer to receive notifications...</strong></span></p><p>It implements the update method, as before, but the signature of the method is a bit different:</p><p>If you want to “push” data to the observers, you can pass the data as a data object to the notifyObservers(arg) method. If not, then the Observer has to “pull” the data it wants from the Observable object passed to it. How? Let’s rework the Weather Station and you’ll see.</p><div class="informalfigure"><a id="med_id00107a"></a><div class="mediaobject"><a id="med_id00107"></a><img src="/library/view/head-first-design/0596007124/figs/web/066fig01.png.jpg" alt="image with no caption" width="356" height="485"></div></div><p>The setChanged() method is used to signify that the state has changed and that notifyObservers(), when it is called, should update its observers. If notifyObservers() is called without first calling setChanged(), the observers will NOT be notified. Let’s take a look behind the scenes of Observable to see how this works:</p><div class="sidebar"><a id="behind_the_scenes"></a><div class="sidebar-title">Behind the Scenes</div><div class="informalfigure"><a id="med_id00108a"></a><div class="mediaobject"><a id="med_id00108"></a><img src="/library/view/head-first-design/0596007124/figs/web/066fig02.png.jpg" alt="image with no caption" width="678" height="325"></div></div></div><p>Why is this necessary? The setChanged() method is meant to give you more flexibility in how you update observers by allowing you to optimize the notifications. For example, in our Weather Station, imagine if our measurements were so sensitive that the temperature readings were constantly fluctuating by a few tenths of a degree. That might cause the WeatherData object to send out notifications constantly. Instead, we might want to send out notifications only if the temperature changes more than half a degree and we could call setChanged() only after that happened.</p><p>You might not use this functionality very often, but it’s there if you need it. In either case, you need to call setChanged() for notifications to work. If this functionality is something that is useful to you, you may also want to use the clearChanged() method, which sets the changed state back to false, and the hasChanged() method, which tells you the current state of the changed flag.</p></div><div class="sect1" title="Reworking the Weather Station with the built-in support"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="reworking_the_weather_station_with_the_b">Reworking the Weather Station with the built-in support</h2></div></div></div><p><a id="iddle2058" class="indexterm"></a><a id="iddle2512" class="indexterm"></a><span class="strong"><strong>First, let’s rework WeatherData to use java.util.Observable</strong></span></p><div class="informalfigure"><a id="med_id00109a"></a><div class="mediaobject"><a id="med_id00109"></a><img src="/library/view/head-first-design/0596007124/figs/web/067fig01.png.jpg" alt="image with no caption" width="747" height="720"></div></div><p><span class="strong"><strong>Now, let’s rework the CurrentConditionsDisplay</strong></span></p><div class="informalfigure"><a id="med_id00110a"></a><div class="mediaobject"><a id="med_id00110"></a><img src="/library/view/head-first-design/0596007124/figs/web/068fig01.png.jpg" alt="image with no caption" width="799" height="797"></div></div><div class="sidebar"><a id="code_magnets"></a><div class="sidebar-title">Code Magnets</div><p><a id="iddle1144" class="indexterm"></a><a id="iddle1507" class="indexterm"></a>The ForecastDisplay class is all scrambled up on the fridge. Can you reconstruct the code snippets to make it work? Some of the curly braces fell on the floor and they were too small to pick up, so feel free to add as many of those as you need!</p><div class="informalfigure"><a id="med_id00111a"></a><div class="mediaobject"><a id="med_id00111"></a><img src="/library/view/head-first-design/0596007124/figs/web/069fig01.png.jpg" alt="image with no caption" width="814" height="796"></div></div></div></div><div class="sect1" title="Running the new code"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="running_the_new_code">Running the new code</h2></div></div></div><p><span class="strong"><strong>Just to be sure, let’s run the new code...</strong></span></p><div class="informalfigure"><a id="med_id00112a"></a><div class="mediaobject"><a id="med_id00112"></a><img src="/library/view/head-first-design/0596007124/figs/web/070fig01.png.jpg" alt="image with no caption" width="592" height="355"></div></div><p><span class="strong"><strong>Hmm, do you notice anything different? Look again...</strong></span></p><p>You’ll see all the same calculations, but mysteriously, the order of the text output is different. Why might this happen? Think for a minute before reading on...</p><p><span class="strong"><strong>Never depend on order of evaluation of the Observer notifications</strong></span></p><p>The java.util.Observable has implemented its notifyObservers() method such that the Observers are notified in a <span class="emphasis"><em>different</em></span> order than our own implementation. Who’s right? Neither; we just chose to implement things in different ways.</p><p>What would be incorrect, however, is if we wrote our code to <span class="emphasis"><em>depend</em></span> on a specific notification order. Why? Because if you need to change Observable/Observer implementations, the order of notification could change and your application would produce incorrect results. Now that’s definitely not what we’d consider loosely coupled.</p><div class="informalfigure"><a id="med_id00113a"></a><div class="mediaobject"><a id="med_id00113"></a><img src="/library/view/head-first-design/0596007124/figs/web/071fig01.png.jpg" alt="image with no caption" width="301" height="510"></div></div></div><div class="sect1" title="The dark side of java.util.Observable"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="dark_side_of_javadotutildotobservable">The dark side of java.util.Observable</h2></div></div></div><p><a id="iddle1420" class="indexterm"></a><a id="iddle1799" class="indexterm"></a><a id="iddle2141" class="indexterm"></a>Yes, good catch. As you’ve noticed, Observable is a class, not an <span class="emphasis"><em>interface</em></span>, and worse, it doesn’t even <span class="emphasis"><em>implement</em></span> an interface. Unfortunately, the java.util.Observable implementation has a number of problems that limit its usefulness and reuse. That’s not to say it doesn’t provide some utility, but there are some large potholes to watch out for.</p><p><span class="strong"><strong>Observable is a class</strong></span></p><p>You already know from our principles this is a bad idea, but what harm does it really cause?</p><p>First, because Observable is a <span class="emphasis"><em>class</em></span>, you have to <span class="emphasis"><em>subclass</em></span> it. That means you can’t add on the Observable behavior to an existing class that already extends another superclass. This limits its reuse potential (and isn’t that why we are using patterns in the first place?).</p><p>Second, because there isn’t an Observable interface, you can’t even create your own implementation that plays well with Java’s built-in Observer API. Nor do you have the option of swapping out the java.util implementation for another (say, a new, multithreaded implementation).</p><p><span class="strong"><strong>Observable protects crucial methods</strong></span></p><p>If you look at the Observable API, the setChanged() method is protected. So what? Well, this means you can’t call setChanged() unless you’ve subclassed Observable. This means you can’t even create an instance of the Observable class and compose it with your own objects, you <span class="emphasis"><em>have</em></span> to subclass. The design violates a second design principle here...<span class="emphasis"><em>favor composition over inheritance</em></span>.</p><p><span class="strong"><strong>What to do?</strong></span></p><p>Observable <span class="emphasis"><em>may</em></span> serve your needs if you can extend java.util.Observable. On the other hand, you may need to roll your own implementation as we did at the beginning of the chapter. In either case, you know the Observer Pattern well and you’re in a good position to work with any API that makes use of the pattern.</p></div><div class="sect1" title="Other places you’ll find the Observer Pattern in the JDK"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="other_places_youapostrophell_find_the_ob">Other places you’ll find the Observer Pattern in the JDK</h2></div></div></div><p><a id="iddle1871" class="indexterm"></a><a id="iddle2050" class="indexterm"></a><a id="iddle2448" class="indexterm"></a>The java.util implementation of Observer/Observable is not the only place you’ll find the Observer Pattern in the JDK; both JavaBeans and Swing also provide their own implementations of the pattern. At this point you understand enough about Observer to explore these APIs on your own; however, let’s do a quick, simple Swing example just for the fun of it.</p><div class="note" title="Note"><h3 class="title"><a id="ch02note06"></a>Note</h3><p>If you’re curious about the Observer Pattern in JavaBeans, check out the PropertyChangeListener interface.</p></div><p><span class="strong"><strong>A little background...</strong></span></p><p>Let’s take a look at a simple part of the Swing API, the JButton. If you look under the hood at JButton’s superclass, AbstractButton, you’ll see that it has a lot of add/ remove listener methods. These methods allow you to add and remove observers, or, as they are called in Swing, listeners, to listen for various types of events that occur on the Swing component. For instance, an ActionListener lets you “listen in” on any types of actions that might occur on a button, like a button press. You’ll find various types of listeners all over the Swing API.</p><p><span class="strong"><strong>A little life-changing application</strong></span></p><p>Okay, our application is pretty simple. You’ve got a button that says “Should I do it?” and when you click on that button the listeners (observers) get to answer the question in any way they want. We’re implementing two such listeners, called the AngelListener and the DevilListener. Here’s how the application behaves:</p><div class="informalfigure"><a id="med_id00114a"></a><div class="mediaobject"><a id="med_id00114"></a><img src="/library/view/head-first-design/0596007124/figs/web/072fig01.png.jpg" alt="image with no caption" width="877" height="446"></div></div></div><div class="sect1" title="And the code..."><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="and_the_codehellip">And the code...</h2></div></div></div><p>This life-changing application requires very little code. All we need to do is create a JButton object, add it to a JFrame and set up our listeners. We’re going to use inner classes for the listeners, which is a common technique in Swing programming. If you aren’t up on inner classes or Swing, you might want to review the “Getting GUI” chapter of <span class="emphasis"><em>Head First Java</em></span>.</p><div class="informalfigure"><a id="med_id00115a"></a><div class="mediaobject"><a id="med_id00115"></a><img src="/library/view/head-first-design/0596007124/figs/web/073fig01.png.jpg" alt="image with no caption" width="779" height="718"></div></div><div class="informalfigure"><a id="med_id00116a"></a><div class="mediaobject"><a id="med_id00116"></a><img src="/library/view/head-first-design/0596007124/figs/web/074fig01.png.jpg" alt="image with no caption" width="276" height="421"></div></div><div class="note" title="Note"><h3 class="title"><a id="ch02note07"></a>Note</h3><p><a id="iddle1877" class="indexterm"></a><a id="iddle2043" class="indexterm"></a>Lambda expressions were added in Java 8. If you aren’t familiar with them, don’t worry about it; you can continue using inner classes for your Swing observers.</p></div><p>Yes, you’re still using the Observer Pattern. By using a lambda expression rather than an inner class, you’re just skipping the step of creating an ActionListener object. With a lambda expression, you create a function object instead, and this function object is the observer. When you pass that function object to addActionListener(), Java ensures its signature matches actionPerformed(), the one method in the ActionListener interface.</p><p>Later, when the button is clicked, the button object notifies its observers—including the function objects created by the lambda expressions—that it’s been clicked, and calls each listener’s actionPerformed() method.</p><p>Let’s take a look at how you’d use lambda expressions as observers to simplify our previous code:</p><div class="sect2" title="The updated code, using lambda expressions"><div class="titlepage"><div><div><h3 class="title" id="updated_codecomma_using_lambda_expressio">The updated code, using lambda expressions</h3></div></div></div><div class="informalfigure"><a id="med_id00117a"></a><div class="mediaobject"><a id="med_id00117"></a><img src="/library/view/head-first-design/0596007124/figs/web/074fig02.png.jpg" alt="image with no caption" width="753" height="384"></div></div></div></div><div class="sect1" title="Tools for your Design Toolbox"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="tools_for_your_design_toolbox-id00010">Tools for your Design Toolbox</h2></div></div></div><p>Welcome to the end of <a class="xref" href="ch02.html" title="Chapter 2. The Observer Pattern: Keeping your Objects in the know">Chapter 2</a>. You’ve added a few new things to your OO toolbox...</p><div class="informalfigure"><a id="med_id00118a"></a><div class="mediaobject"><a id="med_id00118"></a><img src="/library/view/head-first-design/0596007124/figs/web/075fig01.png.jpg" alt="image with no caption" width="545" height="792"></div></div><div class="sidebar"><a id="bullet_points-id00011"></a><div class="sidebar-title">Bullet Points</div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The Observer Pattern defines a one-to-many relationship between objects.</p></li><li class="listitem"><p>Subjects, or as we also know them, Observables, update Observers using a common interface.</p></li><li class="listitem"><p>Observers are loosely coupled in that the Observable knows nothing about them, other than that they implement the Observer interface.</p></li><li class="listitem"><p>You can push or pull data from the Observable when using the pattern (pull is considered more “correct”).</p></li><li class="listitem"><p>Don’t depend on a specific order of notification for your Observers.</p></li><li class="listitem"><p>Java has several implementations of the Observer Pattern, including the general purpose java.util.Observable.</p></li><li class="listitem"><p>Watch out for issues with the java.util.Observable implementation.</p></li><li class="listitem"><p>Don’t be afraid to create your own Observable implementation if needed.</p></li><li class="listitem"><p>Swing makes heavy use of the Observer Pattern, as do many GUI frameworks.</p></li><li class="listitem"><p>You’ll also find the pattern in many other places, including JavaBeans and RMI.</p></li></ul></div></div><div class="sidebar"><a id="design_principle_challenge"></a><div class="sidebar-title">Design Principle Challenge</div><p><a id="iddle1403" class="indexterm"></a><a id="iddle1407" class="indexterm"></a><a id="iddle1421" class="indexterm"></a><a id="iddle1426" class="indexterm"></a><a id="iddle1470" class="indexterm"></a><a id="iddle1674" class="indexterm"></a><a id="iddle2142" class="indexterm"></a>For each design principle, describe how the Observer Pattern makes use of the principle.</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="c1"><col class="c2"></colgroup><tbody><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="note" title="Design Principle"><h3 class="title"><a id="ch02note08"></a>Design Principle</h3><p><span class="emphasis"><em>Identify the aspects of your application that vary and separate them from what stays the same.</em></span></p></div></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>______________________________________________________</p>
<p>______________________________________________________</p>
<p>______________________________________________________</p>
<p>______________________________________________________</p>
<p>______________________________________________________</p>
<p>______________________________________________________</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="note" title="Design Principle"><h3 class="title"><a id="ch02note09"></a>Design Principle</h3><p><span class="emphasis"><em>Program to an interface, not an implementation.</em></span></p></div></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>______________________________________________________</p>
<p>______________________________________________________</p>
<p>______________________________________________________</p>
<p>______________________________________________________</p>
<p>______________________________________________________</p>
<p>______________________________________________________</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; "><div class="note" title="Design Principle"><h3 class="title"><a id="ch02note10"></a>Design Principle</h3><p><span class="emphasis"><em>Favor composition over inheritance.</em></span></p></div></td><td style="vertical-align: top; "><p><span class="underline">This is a hard one, hint: think about how observers and subjects work together.</span></p>
<p>______________________________________________________</p>
<p>______________________________________________________</p>
<p>______________________________________________________</p>
<p>______________________________________________________</p></td></tr></tbody></table></div></div><div class="sidebar"><a id="design_patterns_crossword-id00012"></a><div class="sidebar-title">Design Patterns Crossword</div><p>Time to give your right brain something to do again! This time all of the solution words are from <a class="xref" href="ch02.html" title="Chapter 2. The Observer Pattern: Keeping your Objects in the know">Chapter 2</a>.</p><div class="informalfigure"><a id="med_id00119a"></a><div class="mediaobject"><a id="med_id00119"></a><img src="/library/view/head-first-design/0596007124/figs/web/077fig01.png" alt="image with no caption" width="797" height="542"></div></div><div class="informaltable"><table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Across</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>Down</p></td></tr></thead><tbody><tr><td style="vertical-align: top; border-right: 0.5pt solid ; "><p>1. Observable is a ___________, not an interface.</p>
<p>3. Devil and Angel are _________ to the button.</p>
<p>4. Implement this method to get notified.</p>
<p>5. Jill got one of her own.</p>
<p>6. CurrentConditionsDisplay implements this interface.</p>
<p>8. How to get yourself off the Observer list.</p>
<p>12. You forgot this if you’re not getting notified when you think you should be.</p>
<p>15. One Subject likes to talk to _______ observers.</p>
<p>18. Don’t count on this for notification.</p>
<p>19. Temperature, humidity and __________.</p>
<p>20. Observers are __________ on the Subject.</p>
<p>21. Program to an _________ not an implementation.</p>
<p>22. A Subject is similar to a __________.</p></td><td style="vertical-align: top; "><p>2. Ron was both an Observer and a _________.</p>
<p>3. You want to keep your coupling _________.</p>
<p>7. He says you should go for it.</p>
<p>9. _________ can manage your observers for you.</p>
<p>10. Java framework with lots of Observers.</p>
<p>11. Weather-O-Rama’s CEO named after this kind of storm.</p>
<p>13. Observers like to be ___________ when something new happens.</p>
<p>14. The WeatherData class __________ the Subject interface.</p>
<p>16. He didn’t want any more ints, so he removed himself.</p>
<p>17. CEO almost forgot the ________ index display</p>
<p>19. Subject initially wanted to _________ all the data to Observer.</p></td></tr></tbody></table></div></div><div class="sidebar"><a id="sharpen_your_pencil_solution-id00013"></a><div class="sidebar-title">Sharpen your pencil Solution</div><p><a id="iddle1404" class="indexterm"></a><a id="iddle1408" class="indexterm"></a><a id="iddle1422" class="indexterm"></a><a id="iddle1427" class="indexterm"></a><a id="iddle1471" class="indexterm"></a><a id="iddle1565" class="indexterm"></a><a id="iddle1675" class="indexterm"></a><a id="iddle2143" class="indexterm"></a><a id="iddle2310" class="indexterm"></a>Based on our first implementation, which of the following apply? (Choose all that apply.)</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00026"></a><img src="/library/view/head-first-design/0596007124/figs/web/078fig01.png.jpg" alt="" width="26" height="20"></span></p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>A.</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>We are coding to concrete implementations, not interfaces.</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00027"></a><img src="/library/view/head-first-design/0596007124/figs/web/078fig02.png.jpg" alt="" width="23" height="24"></span></p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>B.</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>For every new display element we need to alter code.</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00028"></a><img src="/library/view/head-first-design/0596007124/figs/web/078fig03.png.jpg" alt="" width="21" height="25"></span></p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>C.</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>We have no way to add display elements at run time.</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00029"></a><img src="/library/view/head-first-design/0596007124/figs/web/square.png.jpg" alt="" width="17" height="17"></span></p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>D.</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>The display elements don’t implement a common interface.</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00030"></a><img src="/library/view/head-first-design/0596007124/figs/web/078fig04.png.jpg" alt="" width="24" height="22"></span></p></td><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>E.</p></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>We haven’t encapsulated what changes.</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; "><p><span class="inlinemediaobject"><a id="inline_id00031"></a><img src="/library/view/head-first-design/0596007124/figs/web/square.png.jpg" alt="" width="17" height="17"></span></p></td><td style="vertical-align: top; border-right: 0.5pt solid ; "><p>F.</p></td><td style="vertical-align: top; "><p>We are violating encapsulation of the WeatherData class.</p></td></tr></tbody></table></div></div><div class="sidebar"><a id="design_principle_challenge_solution"></a><div class="sidebar-title">Design Principle Challenge Solution</div><div class="informaltable"><table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="c1"><col class="c2"></colgroup><tbody><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="note" title="Design Principle"><h3 class="title"><a id="ch02note11"></a>Design Principle</h3><p><span class="emphasis"><em>Identify the aspects of your application that vary and separate them from what stays the same.</em></span></p></div></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>__<span class="underline">The thing that varies in the Observer Pattern</span>_______</p>
<p>__<span class="underline">is the state of the Subject and the number and</span>_____</p>
<p>__<span class="underline">types of Observers. With this pattern, you can</span>______</p>
<p>__<span class="underline">vary the objects that are dependent on the state</span>____</p>
<p>__<span class="underline">of the Subject, without having to change that</span>_______</p>
<p>__<span class="underline">Subject. That’s called planning ahead!</span>____________</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="note" title="Design Principle"><h3 class="title"><a id="ch02note12"></a>Design Principle</h3><p><span class="emphasis"><em>Program to an interface, not an implementation.</em></span></p></div></td><td style="vertical-align: top; border-bottom: 0.5pt solid ; "><p>__<span class="underline">Both the Subject and Observer use interfaces.</span>______</p>
<p>__<span class="underline">The Subject keeps track of objects implementing</span>____</p>
<p>__<span class="underline">the Observer interface, while the observers</span>_________</p>
<p>__<span class="underline">register with, and get notified by, the Subject</span>_______</p>
<p>__<span class="underline">interface. As we’ve seen, this keeps things nice and</span>______</p>
<p>__<span class="underline">loosely coupled.</span>___________________________</p></td></tr><tr><td style="vertical-align: top; border-right: 0.5pt solid ; "><div class="note" title="Design Principle"><h3 class="title"><a id="ch02note13"></a>Design Principle</h3><p><span class="emphasis"><em>Favor composition over inheritance.</em></span></p></div></td><td style="vertical-align: top; "><p>__<span class="underline">The Observer Pattern uses composition to compose</span>__</p>
<p>__<span class="underline">any number of Observers with their Subjects.</span>________</p>
<p>__<span class="underline">These relationships aren’t set up by some kind of</span>_____</p>
<p>__<span class="underline">inheritance hierarchy. No, they are set up at</span>_____</p>
<p>__<span class="underline">runtime by composition!</span>___________________________</p>
<p>_____________________________________________</p></td></tr></tbody></table></div></div><div class="sidebar"><a id="code_magnets_solution"></a><div class="sidebar-title">Code Magnets Solution</div><p><a id="iddle1145" class="indexterm"></a><a id="iddle1508" class="indexterm"></a>The ForecastDisplay class is all scrambled up on the fridge. Can you reconstruct the code snippets to make it work? Some of the curly braces fell on the floor and they were too small to pick up, so feel free to add as many of those as you need! Here’s our solution.</p><div class="informalfigure"><a id="med_id00120a"></a><div class="mediaobject"><a id="med_id00120"></a><img src="/library/view/head-first-design/0596007124/figs/web/079fig01.png.jpg" alt="image with no caption" width="539" height="768"></div></div></div><div class="sidebar"><a id="design_patterns_crossword_soluti-id00014"></a><div class="sidebar-title">Design Patterns Crossword Solution</div><div class="informalfigure"><a id="med_id00121a"></a><div class="mediaobject"><a id="med_id00121"></a><img src="/library/view/head-first-design/0596007124/figs/web/080fig01.png" alt="image with no caption" width="708" height="482"></div></div></div></div></section></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/library/view/head-first-design/0596007124/ch01.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">1. Intro to Design Patterns: Welcome to Design Patterns</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/library/view/head-first-design/0596007124/ch03.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">3. The Decorator Pattern: Decorating Objects</div>
        </a>
    
  
  </div>


        
    </section>
  </div>
<section class="sbo-saved-archives"></section>

<script>
  window.dataLayer = window.dataLayer || [];
  context = {
    product: {
      title: 'Head First Design Patterns',
      type: 'book',
      identifier: '0596007124',
      topic: 'Design Patterns'
    },
    content: {
      title: 'Head First Design Patterns',
      formatType: 'book',
      identifier: '0596007124',
      author: 'Kathy Sierra, Bert Bates, Elisabeth Robson, Eric Freeman',
      publisher: 'O&#39;Reilly Media, Inc.',
      releaseDate: '2004-10-25',
      parentTopic: 'none',
      free: 'no',
      subdirectory: 'none'
    }
  }
  dataLayer.push(context);
</script>



          
          
  




    
    



        
      </div>
      
        



  <footer class="pagefoot t-pagefoot">
    <a href="#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class='js-footer-nav'>
      
        <li><a class="t-resource-centers-footer" href="/resource-centers/">Resource Centers</a></li>
      
      <li>
      <a class="t-queue-footer" href="/playlists/">Playlists</a>
      </li>
      
        <li><a class="t-recent-footer" href="/history/">History</a></li>
        <li><a class="t-topics-footer" href="/topics?q=*&limit=21">Topics</a></li>
      
      <li><a class="t-settings-footer js-settings" href="/u/preferences/">Settings</a></li>
      <li class="full-support"><a href="https://www.oreilly.com/online-learning/support/">Support</a></li>
      <li><a href="https://www.oreilly.com/online-learning/apps.html">Get the App</a></li>
      <li><a href="/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">&#169; 2019 <a href="/" target="_blank">Safari</a>.</span>
    <a href="/terms/">Terms of Service</a> /
    <a href="https://www.oreilly.com/privacy.html">Privacy Policy</a>
  </footer>

<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"licenseKey":"510f1a6865","transactionName":"YgdaZ0NSW0cEB0RdWltNfkZfUEFdCgofXFBHDVYdR1pQQxZeRl1QQj1aWkU=","errorBeacon":"bam.nr-data.net","applicationTime":4162,"queueTime":2464,"beacon":"bam.nr-data.net","agent":"","applicationID":"172641827,79672898,93931619"}</script>


      
    
    <script src="/jsi18n/web/" charset="utf-8"></script>
    <script src="/library/jsi18n/appcache/" charset="utf-8"></script>
  </body>
</html>
